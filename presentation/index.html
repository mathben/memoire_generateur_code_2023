<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

  <title>reveal.js</title>

  <link rel="stylesheet" href="dist/reset.css">
  <link rel="stylesheet" href="dist/reveal.css">
  <link rel="stylesheet" href="dist/theme/dracula.css">

  <!-- Theme used for syntax highlighted code -->
  <link rel="stylesheet" href="plugin/highlight/monokai.css">

  <!-- Homemade -->
  <link rel="stylesheet" href="css/custom.css">
</head>
<body>
<div class="reveal">
  <div class="slides">
    <section data-state="no-toc-progress">
      <div>
        <u><b>Génération de code automatisée pour les modules d'un ERP libre, application à la création d'un réseau
          d'entraide et d'amélioration continue</b></u><br/>
        Présenté par <b>Mathieu Benoit</b><br/>
      </div>
      <div style="text-align: left;">Jury :</div>
      <ul>
        <li>
          Martin TRÉPANIER, président
        </li>
        <li>
          Samuel BASSETTO, membre et directeur de recherche
        </li>
        <li>
          Giovanni BELTRAME, membre
        </li>
      </ul>
      <img class="r-stretch" alt="Logo LABAC" src="assets/logo_labac_black.png"/>
    </section>

    <!-- TODO situation son travail dans le cadre plus général de son domaine d'étude -->

    <section>
      <h2>Plan de présentation</h2><br/>
      <ol class="r-fit-text">
        <li>
          Introduction
          <ol>
            <li>
              Problématique
            </li>
            <li>
              Poïèse
            </li>
            <li>
              Auto-reproducteur
            </li>
            <li>
              Logiciel libre
            </li>
          </ol>
        </li>
        <li>
          Objectifs et méthodologies
        </li>
        <li>
          Résultats
        </li>
        <li>
          Conclusion
          <ol>
            <li>
              Principale conclusions de la recherche
            </li>
            <li>
              Question demeurée sans réponse
            </li>
            <li>
              Débouchent sur de nouvelles voies de recherche
            </li>
          </ol>
        </li>
        <li>
          Démonstration
        </li>
      </ol>
    </section>

    <!-- Why -->
    <section>
      <section>
        <div style="text-align:left">
          Problématique mondiale : Crise climatique, migration, pandémie, situation d'urgence, etc<br/>
          <br/>
          Problématique locale : Gestion des besoins de sociétés jusqu'aux individus<br/>
        </div>
        <u>Réseau d'entraide</u><br/>
      </section>
      <section>
        <u>Besoins technologiques</u><br/>
        <ul>
          <li>
            Communication
          </li>
          <li>
            Partage et gestion des ressources
            <ul>
              <li>
                Gestion du matériel
              </li>
            </ul>
          </li>
          <li>
            Suivi des procédures et traçabilité
          </li>
          <li>
            Système de reconnaissance sur l'entraide
          </li>
          <li>
            Amélioration continue
          </li>
        </ul>
        <br/>
        Et bien plus encore!
      </section>
      <section>
        <u>ERP comme solution</u><br/>
        <ul>
          <li>
            Plateforme ERPLibre 1.5.0 qui utilise Odoo 12 communautaire
          </li>
          <li>
            2977 modules accessibles
          </li>
          <li>
            ecommerce, sondage, portail, newsletter, support client, CRM, contact, suivi de fabrication, projet, etc.
          </li>
          <li>
            Marché des solutions ERP évalué autour de 40 milliards USD mondialement en 2020
          </li>
        </ul>
      </section>
      <section>
        <u>Problème général du développement de ERP</u><br/>
        <ul>
          <li>
            Développement perpétuel, de longue durée, coûteux en temps et argent
          </li>
          <li>
            Difficile d'avoir une pérennité sur des projets bénévoles
          </li>
          <li>
            Maintenance exigente et risque d'introduire des erreurs est important
          </li>
        </ul>
      </section>
      <section>
        Solution : <u>Automatisation du développement</u><br/>
        <img class="r-stretch" alt="Logo LABAC" src="../diagramme/devops.png"/><br/>
        Pour réduire le temps de développement, faciliter son déploiement et le suivi de la satisfaction d'utilisation.
      </section>
    </section>

    <section>
      <section>
        <h2>Poïèse</h2><br/>
        Processus créatif de fabrication, de production ou de création.
        <!-- todo mettre exemple génie industriel -->
      </section>
      <section>
        <h2>Technopoïèse</h2><br/>
        Processus créatif de développement technologique.
        <br/>
        <br/>
        Capacité de l'humanité à créer et à façonner la technologie pour répondre à ses besoins et à ses désirs.
        <br/>
        <br/>
        <u>La technologie est un outil.</u>
      </section>
      <section>
        <h2>Allopoïèse</h2><br/>
        Un système qui développe quelque chose avec des composantes externes.
      </section>
      <section>
        <h2>Autopoïèse</h2><br/>
        Un système qui se développe soi-même avec seulement des composantes internes.
        <br/>
        <u>Contraire de l'Allopoïèse</u>
        <br/>
        <ul>
          <li>
            Autonome
          </li>
          <li>
            Individuel
          </li>
          <li>
            Connaissant et établis ses limites
          </li>
          <li>
            Absent d'entrant et de sortant
          </li>
        </ul>
        <br/>
        <br/>
        <u>C'est un auto-reproducteur!</u>
      </section>
      <section>
        <h2>Sympoïèse</h2><br/>
        Un système qui se développe en collectivité et en collaboration qui a un effet bénéfique sur les
        écosystèmes.<br/>
        <br/>
        <ul>
          <li>
            Technologie éthique
          </li>
          <li>
            Sortir des individus/organismes de l'isolement
          </li>
          <li>
            Gérer des cas d'urgences
          </li>
          <li>
            Mouvement des villes en transition
          </li>
        </ul>
      </section>
    </section>
    <!-- todo mettre exemple génie industriel -->

    <section>
      <section>
        <h2>Auto-reproducteur</h2>
        Le <u>quine</u> se produit par lui-même, de niveau 0. C'est un programme informatique qui imprime son propre
        code source.
        <pre class="bash"><code data-trim data-noescape>
<script
    type="text/template">a='a=%r;print(a%%a)';print(a%a)</script>
      </code></pre>
      </section>

      <section>
        <h2>Rétro-ingénierie</h2>
        <img class="r-stretch" alt="Rétro-ingénierie" src="../diagramme/Retroingenierie_-_Byrne.png"/>
        <p>Capacité d'<u>extraire</u> des informations sur un code pour créer une <u>altération</u> et permettre la <u>ré-ingénierie</u>
          grâce à l'<u>arbre de la syntaxe abstraite</u>(AST).
        </p>
      </section>

      <section>
        <h2>Génération de code par rétro-ingénierie</h2>
        <img class="r-stretch" alt="Mode direct et inverse" src="../diagramme/machine_ing_retro_ing.drawio.png"/>
        <p>
          Boucle de génération de code qui permet l'amélioration continue. Auto-génération lorsque <br/>C = M
        </p>
      </section>

    </section>

    <section>
      <section>
        <h2>Logiciel Libre</h2>
        <div style="text-align: left">
          Développement de logiciel pour les communautés en respectant leurs 4 libertés :
        </div>
        <ul>
          <li>
            utiliser sans restriction;
          </li>
          <li>
            étudier pour comprendre;
          </li>
          <li>
            copier pour s'attribuer;
          </li>
          <li>
            modifier pour adapter, en redistribuant.
          </li>
        </ul>
        <br/>
        <div style="text-align: left">
          <u>Respecte</u> le développeur et leur utilisateur via la copyleft <span class="copyleft">&copy;</span> en
          rendant sa production un bien commun via la contrainte de redistribution qui hérite des 4 libertés.
        </div>
      </section>
      <section>
        <div style="text-align: left">
          Le libre est nécessaire pour partager des connaissances de savoir faire sur des procédures en contexte de
          crise.
        </div>
        <div style="text-align: left">
          Permet à l'utilisateur d'adapter le produit à plusieurs contextes en état d'urgence et de le partager.
        </div>
      </section>
      <section>
        Encourager en proposant seulement les <u>licences fortes libres</u>, telle que la <a
          href="https://www.gnu.org/licenses/agpl-3.0.fr.html">AGPLv3</a> ou même une licence liée à la juridiction
        local de <u>Polytechnique Montréal au Québec Canada</u>, soit la <a
          href="https://forge.gouv.qc.ca/licence/liliq-r+/">LiLiQ-R+</a> ainsi que <a
          href="https://www.tresor.gouv.qc.ca/fileadmin/PDF/ressources_informationnelles/logiciels_libres/ll.pdf">le
        guide de référence gouvernementale à ce sujet au Québec</a> sur les logiciels libres et ouverts.<br/>
      </section>
      <section>
        <h2>Logiciel libre en industrie</h2>
        <div style="text-align: left">
          Les <u><span style="color:orange">industries</span></u> vont pouvoir :
        </div>
        <ul>
          <li>
            <u><span style="color:greenyellow;">respecter</span></u> les demandes et <u>besoins</u> de leurs <u><span
              style="color: deepskyblue">consommateurs</span></u>;
          </li>
          <li>
            <u><span style="color:greenyellow;">bénéficier</span></u> d'une <u><span style="color:orange">réduction du gaspillage</span>
            de <span style="color: mediumpurple">temps</span> de développement</u>
            par la <u>réutilisation</u> de <span style="color:orange">code existant</span>;
          </li>
        </ul>
        <br/>
        <br/>
        <span style="color:greenyellow;">Copier</span> du logiciel utilise <span style="color: deepskyblue">peu de ressource matérielle</span>.
        Le développement de logiciel est une ressource infinie
        dont <u>la <span style="color:orange">fabrication</span> est coûteuse en <span
          style="color: mediumpurple">temps</span></u>.
      </section>
    </section>

    <!-- how objectif et méthodologie -->
    <section>
      <section>
        <h2>Objectifs</h2>
        <ol>
          <li>
            développer un <u>générateur</u> de code de module sur Odoo;
          </li>
          <li>
            développer une logique d’<u>amélioration continue</u> sur l’écriture du code;
          </li>
          <li>
            développer une <u>interface</u> permettant de paramétrer la génération de code;
          </li>
          <li>
            développer un système de <u>distribution</u>;
          </li>
          <li>
            développer un système de <u>gestion de communauté</u>.
          </li>
        </ol>
      </section>

      <section>
        <h2>Méthodologie SO-1</h2>
        <ol>
          <li>
            Développer une logique d’écriture de module sur une architecture de MVC avec support de plateforme web;
          </li>
          <li>
            Mise en place d’un concept de gabarit de code qui génère du code;
          </li>
          <li>
            Mise en place de la génération de code à partir de données;
          </li>
          <li>
            Générer un module à partir d’une base de données externe.
          </li>
        </ol>
      </section>

      <section>
        <h2>Méthodologie SO-2</h2>
        <ol>
          <li>
            Développer la capacité de comprendre une structure de code et de la reproduire;
          </li>
          <li>
            Définir ce qui est de l’amélioration continue et son application dans un contexte d’automatisation;
          </li>
          <li>
            Mise en place de test de validation de code sur des critères de qualité mesurables;
          </li>
          <li>
            Intégration de règles de codage standardisées pour favoriser le réseau d’entraide.
          </li>
        </ol>
      </section>

      <section>
        <h2>Méthodologie SO-3</h2>
        <ol>
          <li>
            Proposer une classification des techniques que le robot logiciel codeur peut réaliser en programmation;
          </li>
          <li>
            Développer une interface permettant le contrôle du robot logiciel codeur pour l’orienter dans la
            programmation de fonctionnalités;
          </li>
          <li>
            Rendre disponible une interface LCNC<sup>1</sup> pour permettre aux utilisateurs de programmer leurs
            fonctionnalités.
          </li>
        </ol>
        <hr/>
        <div style="text-align: left; font-size: smaller">1: Low-Code/No-Code</div>
      </section>

      <section>
        <h2>Méthodologie SO-4</h2>
        <ol>
          <li>
            Pour la section déploiement, il faut développer un système de distribution du robot logiciel codeur.
          </li>
        </ol>
      </section>

      <section>
        <h2>Méthodologie SO-5</h2>
        <ol>
          <li>
            Documenter les processus de développement pour amener les utilisateurs à contribuer;
          </li>
          <li>
            Mettre des guides pour permettre le sentiment d’appartenance;
          </li>
          <li>
            Mettre en place une politique tolérance zéro avec un système de communication non
            violente et créer un lieu de discussion publique;
          </li>
          <li>
            Élaboration du prototype pour les spécifications du réseau de l’Accorderie du Canada;
          </li>
          <li>
            Élaboration du prototype pour les spécifications de l’organisme CEPPP du Canada;
          </li>
        </ol>
      </section>

    </section>

    <!-- what résultat -->
    <section>
      <section>
        <h2>Résultat du générateur de code</h2>
        <img class="r-stretch" alt="Logo LABAC" src="../diagramme/architecture_machine.drawio.png"/>
        <p>1. MVC - 2. Gabarit - 3. Données - 4. BD externe</p>
      </section>

      <section>
        <h2>Séquence d'utilisation</h2>
        <img class="r-stretch" alt="Logo LABAC" src="../diagramme/code_generateur_erplibre_global_sequence.drawio.png"/>
      </section>
    </section>

    <section>
      <h2>Résultat de l'amélioraton continue</h2>
      <ol>
        <li>
          Extraction du code via l’utilisation d’un AST et extraction des méta-données dans les
          fichiers XML;
        </li>
        <li>
          Amélioration continue sur la génération de code grâce à la reproduction à l’aide de
          l’extraction du code;
        </li>
        <li>
          Un outil pour aider à la création de technique de génération à l’aide d’un générateur
          de générateur de code;
        </li>
        <li>
          Le générateur de code est accompagné de tests de validation en reproduisant l’ensemble
          des techniques en démonstration;
        </li>
        <li>
          La génération de code applique des règles de codage standardisées.
        </li>
      </ol>
    </section>

    <section>
      <section>
        <h2>Résultat sur l'interface</h2>
        <img class="r-stretch" alt="Modèle" src="../diagramme/cg_model.png"/>
      </section>

      <section>
        <img class="r-stretch" alt="Modèle" src="../diagramme/cg_champs.png"/>
      </section>

      <section>
        <img class="r-stretch" alt="Modèle" src="../diagramme/cg_hook.png"/>
      </section>

      <section>
        <img class="r-stretch" alt="Modèle" src="../diagramme/cg_code.png"/>
      </section>

    </section>

    <section>
      <h2>Résultat sur la distribution</h2>
      <p>Distribution du travail via docker pour déploiement rapide.</p>

    </section>

    <section>
      <section>
        <h2>Résultat sur la gestion de communauté</h2>
      </section>

      <section>
        <h2>Accorderie</h2>
        <img class="r-stretch" alt="Modèle" src="../diagramme/accorderie_processus.png"/>
        <p>Migration de données, migration du modèles de données, génération du portail, etc.</p>
      </section>

      <section>
        <h2>CEPPP</h2>
        <p>Extraction du modèle de données d'une plateforme externe en PHP + ré-ingénierie.</p>
        <img class="r-stretch" alt="Modèle" src="../diagramme/exemple_vue_formulaire_patient_ceppp.png"/>
      </section>

      <section>
        <h2>CEPPP (SUITE)</h2>
        <p>Anonymisation des données (non supporté par le générateur)</p>
        <img class="r-stretch" alt="Modèle" src="../diagramme/exemple_vue_formulaire_patient_anonyme_ceppp.png"/>
      </section>

    </section>

    <section>
      <section>
        <h2>Principale conclusions de la recherche</h2>
        <p>Ingénierie</p>
        <img class="r-stretch" alt="Logo LABAC" src="../diagramme/auto_machine_discussion.drawio.png"/>
      </section>

      <section>
        <h2>Principale conclusions de la recherche</h2>
        <p>Communauté</p>
        <img class="r-stretch" alt="Logo LABAC" src="../diagramme/developpeur_outil_developpement.drawio.png"/>
      </section>

    </section>

    <section>
      <section>
        <h2>Question demeurée sans réponse</h2>
        <p>Manque de test et métrique sur les performances de génération et d'utilisation.</p>
        <p>Manque d'intégration des procédures de gestion de communauté à même l'outil.</p>
        <p>Manque d'outil pour compléter le devops.</p>
        <p>Manque de configuration sur la génération pour différent paramètre.</p>
      </section>
      <section>
        <h2>Question demeurée sans réponse</h2>
        <p>
          Auto-poïèse à terminer.
        </p>
        <p>Peut-on générer toute la plateforme entièrement pour Accorderie et CEPPP?</p>
      </section>
    </section>

    <section>
      <h2>Débouchent sur de nouvelles voies de recherche</h2>
      <p>
        Intégration NLP, auto-génération, auto-amélioration. Robot codeur libre!
      </p>
      <p>
        Tester la gestion de projet en simulation état d'urgence.
      </p>
    </section>

    <section>
      <section id="exemples">
        <h2>Démonstration</h2>
        <ul>
          <li>
            <a href="#/exemple_cron"><b>Cron</b> : exécution automatique de script à une date ou heure spécifiée à
              l'avance.</a>
          </li>
          <li>
            <a href="#/exemple_migration_sql"><b>Migration MySQL</b> : création d'un modèle et vue selon le schéma de
              base de données.</a>
          </li>
          <li>
            <a href="#/exemple_snippet"><b>Génération snippet</b> : création d'un modèle et génération snippet sur site
              web.</a>
          </li>
          <li>
            <a href="#/exemple_carte_interactive"><b>Carte interactive</b> : création du frontend avec Leaflet connecté
              au modèle géospatiale.</a>
          </li>
        </ul>
      </section>

      <section id="exemple_cron">
        <h2>Cron <a href="#/exemples">↑</a></h2>
        &#10003; modifier paramètre cron et regarder les différences
        <pre class="bash"><code data-line-numbers="1-3|4|5-7" data-trim data-noescape>
<script type="text/template">./script/database/db_restore.py --database cg_cron
./script/addons/install_addons_dev.sh cg_cron code_generator_auto_backup
./run.sh -d cg_cron
# TODO faire les modifications
cd ./addons/OCA_server-tools
git diff
cd -
</script>
      </code></pre>
      </section>

      <section id="exemple_migration_sql">
        <h2>Migration MySQL <a href="#/exemples">↑</a></h2>
        &#10003; faire afficher un nouveau champ lors de la migration
        <pre class="bash"><code data-line-numbers="1-3|4-6|7" data-trim data-noescape>
<script type="text/template">./script/database/restore_mariadb_sql_example_1.sh
./script/database/db_restore.py --database cg_migrator
./script/addons/install_addons_dev.sh cg_migrator code_generator_migrator_demo_mariadb_sql_example_1
# Faire un commit dans addons/TechnoLibre_odoo-code-generator-template
# Modifier script/database/mariadb_sql_example_1.sql
# Modifier addons/TechnoLibre_odoo-code-generator-template/code_generator_migrator_demo_mariadb_sql_example_1/hooks.py
# Réexécuter et diff
</script>
      </code></pre>
      </section>

      <section id="exemple_snippet">
        <h2>Génération snippet <a href="#/exemples">↑</a></h2>
        &#10003; créer modèle et générer snippet
        <pre class="bash"><code data-line-numbers="1-3|4-6|7" data-trim data-noescape>
<script
    type="text/template">./script/code_generator/new_project.py -m fruit -d ./addons/TechnoLibre_odoo-code-generator-template
# Commit dans ./addons/TechnoLibre_odoo-code-generator-template
./script/database/db_restore.py --database cg_test
./script/addons/install_addons_dev.sh cg_test code_generator_fruit
./run.sh -d cg_test
# Ajouter de son modèle de données et des données, montrer les vues
# Retro-ingénierie
./script/code_generator/search_class_model.py --quiet -d addons/TechnoLibre_odoo-code-generator-template/fruit -t addons/TechnoLibre_odoo-code-generator-template/code_generator_template_fruit
./script/database/db_restore.py --database cg_test_template
./script/addons/install_addons_dev.sh cg_test_template fruit,code_generator_template_fruit

# Ajouter les snippet et vue portail
# Ajout manifest "code_generator_website_snippet" et "code_generator_portal",
# Dans le hook mettre `lst_depend_module = ["portal", "website"]`
# Dans le hook, mettre variable `"enable_generate_portal": True, "portal_enable_create": True,`
# Copier case 4 snippet

./script/database/db_restore.py --database cg_test_snippet
./script/addons/install_addons_dev.sh cg_test_snippet code_generator_fruit

# update file addons/TechnoLibre_odoo-code-generator-template/code_generator_demo_website_multiple_snippet/hooks.py
# change MODULE_NAME, comment all case except 4, update model
./script/database/db_restore.py --database cg_snippet
./script/addons/install_addons_dev.sh cg_snippet code_generator_demo_website_leaflet
./script/database/db_restore.py --database cg_test_map
./script/addons/install_addons.sh cg_test_map demo_website_leaflet
./run.sh -d cg_test_map
</script>
      </code></pre>
      </section>

      <section id="exemple_carte_interactive">
        <h2>Carte interactive <a href="#/exemples">↑</a></h2>
        &#10003; démontrer une génération complexe
        <pre class="bash"><code data-trim data-noescape>
<script type="text/template">./script/database/db_restore.py --database cg_map
./script/addons/install_addons_dev.sh cg_map code_generator_demo_website_leaflet
./script/database/db_restore.py --database cg_test_map
./script/addons/install_addons.sh cg_test_map demo_website_leaflet
./run.sh -d cg_test_map
</script>
      </code></pre>
      </section>

    </section>

  </div>
</div>

<script src="dist/reveal.js"></script>
<script src="plugin/notes/notes.js"></script>
<script src="plugin/markdown/markdown.js"></script>
<script src="plugin/highlight/highlight.js"></script>
<script>
    // More info about initialization & config:
    // - https://revealjs.com/initialization/
    // - https://revealjs.com/config/
    Reveal.initialize({
        hash: true,

        // Learn about plugins: https://revealjs.comq/plugins/
        plugins: [RevealMarkdown, RevealHighlight, RevealNotes],
        dependencies: [
            {
                src: 'plugin/toc-progress/toc-progress.js', async: true, callback: function () {
                    toc_progress.initialize();
                    toc_progress.create();
                }
            }
        ]
    });
</script>
</body>
</html>
